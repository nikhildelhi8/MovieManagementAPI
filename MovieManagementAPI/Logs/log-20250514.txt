[2025-05-14 08:45:50 INF] Starting MovieAPI web application...
[2025-05-14 08:45:51 INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-05-14 08:45:51 INF] Now listening on: https://localhost:3000
[2025-05-14 08:45:51 INF] Now listening on: http://localhost:3001
[2025-05-14 08:45:52 INF] Application started. Press Ctrl+C to shut down.
[2025-05-14 08:45:52 INF] Hosting environment: Development
[2025-05-14 08:45:52 INF] Content root path: C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI
[2025-05-14 08:46:16 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies/ - null null
[2025-05-14 08:46:16 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:36', Current time (UTC): '14-05-2025 03:16:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 08:46:16 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:36', Current time (UTC): '14-05-2025 03:16:16'.
[2025-05-14 08:46:16 INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-05-14 08:46:16 INF] AuthenticationScheme: Bearer was challenged.
[2025-05-14 08:46:16 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies/ - 401 0 null 471.5353ms
[2025-05-14 08:47:24 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - application/json 61
[2025-05-14 08:47:24 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:17:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 08:47:24 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:17:24'.
[2025-05-14 08:47:24 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 08:47:25 INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 08:47:25 INF] Executing ObjectResult, writing value of type 'System.String'.
[2025-05-14 08:47:25 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI) in 245.4797ms
[2025-05-14 08:47:25 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 08:47:25 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - 200 null text/plain; charset=utf-8 370.7542ms
[2025-05-14 08:48:25 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies/ - null null
[2025-05-14 08:48:25 INF] Executing endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI)'
[2025-05-14 08:48:25 INF] Route matched with {action = "GetMovies", controller = "Movies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MovieManagementAPI.Models.MovieDTO]]] GetMovies() on controller MovieManagementAPI.Controllers.MoviesController (MovieManagementAPI).
[2025-05-14 08:48:26 INF] user is not authorized to access the portal ,wrong jwt token details
[2025-05-14 08:48:26 INF] Executing ForbidResult with authentication schemes ([]).
[2025-05-14 08:48:26 INF] AuthenticationScheme: Bearer was forbidden.
[2025-05-14 08:48:26 INF] Executed action MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI) in 1017.3828ms
[2025-05-14 08:48:26 INF] Executed endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI)'
[2025-05-14 08:48:26 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies/ - 403 0 null 1144.7553ms
[2025-05-14 09:00:32 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - application/json 61
[2025-05-14 09:00:32 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:30:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 09:00:32 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:30:32'.
[2025-05-14 09:00:32 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 09:00:32 INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 09:00:32 INF] Executing ObjectResult, writing value of type 'System.String'.
[2025-05-14 09:00:32 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI) in 13.189ms
[2025-05-14 09:00:32 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 09:00:32 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - 200 null text/plain; charset=utf-8 59.4893ms
[2025-05-14 09:01:43 INF] Starting MovieAPI web application...
[2025-05-14 09:01:43 INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-05-14 09:01:43 INF] Now listening on: https://localhost:3000
[2025-05-14 09:01:43 INF] Now listening on: http://localhost:3001
[2025-05-14 09:01:44 INF] Application started. Press Ctrl+C to shut down.
[2025-05-14 09:01:44 INF] Hosting environment: Development
[2025-05-14 09:01:44 INF] Content root path: C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI
[2025-05-14 09:01:55 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - application/json 61
[2025-05-14 09:01:55 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:31:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 09:01:55 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:31:55'.
[2025-05-14 09:01:55 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 09:01:55 INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 09:01:55 INF] Executing ObjectResult, writing value of type 'System.String'.
[2025-05-14 09:01:55 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI) in 226.4988ms
[2025-05-14 09:01:55 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 09:01:55 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - 200 null text/plain; charset=utf-8 759.4464ms
[2025-05-14 09:03:58 INF] Starting MovieAPI web application...
[2025-05-14 09:03:58 INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-05-14 09:03:58 INF] Now listening on: https://localhost:3000
[2025-05-14 09:03:58 INF] Now listening on: http://localhost:3001
[2025-05-14 09:03:58 INF] Application started. Press Ctrl+C to shut down.
[2025-05-14 09:03:58 INF] Hosting environment: Development
[2025-05-14 09:03:58 INF] Content root path: C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI
[2025-05-14 09:04:01 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - application/json 61
[2025-05-14 09:04:01 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:34:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 09:04:02 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 03:34:01'.
[2025-05-14 09:04:02 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 09:04:02 INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 09:04:02 INF] Executing ObjectResult, writing value of type 'System.String'.
[2025-05-14 09:04:02 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI) in 217.3255ms
[2025-05-14 09:04:02 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Authenticate (MovieManagementAPI)'
[2025-05-14 09:04:02 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate - 200 null text/plain; charset=utf-8 714.5803ms
[2025-05-14 09:04:08 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies - application/json 114
[2025-05-14 09:04:08 INF] Executing endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI)'
[2025-05-14 09:04:08 INF] Route matched with {action = "GetMovies", controller = "Movies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MovieManagementAPI.Models.MovieDTO]]] GetMovies() on controller MovieManagementAPI.Controllers.MoviesController (MovieManagementAPI).
[2025-05-14 09:04:19 INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."DirectorId", "m"."Title", "d"."Id", "d"."BirthDate", "d"."Name", "m0"."Id", "m0"."Genre", "m0"."MovieId", "m0"."ReleaseDate", "s"."MovieId", "s"."CastId", "s"."Id", "s"."Name"
FROM "Movies" AS "m"
INNER JOIN "Directors" AS "d" ON "m"."DirectorId" = "d"."Id"
LEFT JOIN "MovieDetails" AS "m0" ON "m"."Id" = "m0"."MovieId"
LEFT JOIN (
    SELECT "m1"."MovieId", "m1"."CastId", "c"."Id", "c"."Name"
    FROM "MovieCasts" AS "m1"
    INNER JOIN "Casts" AS "c" ON "m1"."CastId" = "c"."Id"
) AS "s" ON "m"."Id" = "s"."MovieId"
ORDER BY "m"."Id", "d"."Id", "m0"."Id", "s"."MovieId", "s"."CastId"
[2025-05-14 09:04:20 INF] Showing Movie details entity
[2025-05-14 09:04:20 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieManagementAPI.Models.MovieDTO, MovieManagementAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-05-14 09:04:20 INF] Executed action MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI) in 11600.3372ms
[2025-05-14 09:04:20 INF] Executed endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI)'
[2025-05-14 09:04:20 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies - 200 923 application/json; charset=utf-8 11761.3136ms
[2025-05-14 09:23:24 INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
[2025-05-14 09:23:24 INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
[2025-05-14 09:23:24 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-05-14 03:53:24.8334323+00:00');
SELECT changes();
[2025-05-14 09:23:24 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
[2025-05-14 09:23:25 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
[2025-05-14 09:23:25 INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2025-05-14 09:23:25 INF] Applying migration '20250514035257_AddUserTable'.
[2025-05-14 09:23:25 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Username" TEXT NOT NULL,
    "PasswordHash" TEXT NOT NULL
);
[2025-05-14 09:23:25 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "PasswordHash", "Username")
VALUES (1, 'qwerty@123', 'nikhil');
SELECT changes();
[2025-05-14 09:23:25 INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250514035257_AddUserTable', '9.0.3');
[2025-05-14 09:23:25 INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
[2025-05-14 10:02:26 INF] Starting MovieAPI web application...
[2025-05-14 10:02:26 INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-05-14 10:02:27 INF] Now listening on: https://localhost:3000
[2025-05-14 10:02:27 INF] Now listening on: http://localhost:3001
[2025-05-14 10:02:28 INF] Application started. Press Ctrl+C to shut down.
[2025-05-14 10:02:28 INF] Hosting environment: Development
[2025-05-14 10:02:28 INF] Content root path: C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI
[2025-05-14 10:03:39 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate/login - application/json 61
[2025-05-14 10:03:39 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:33:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:03:39 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:33:39'.
[2025-05-14 10:03:39 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate/login - 404 0 null 398.6474ms
[2025-05-14 10:03:39 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:3000/api/authentication/authenticate/login, Response status code: 404
[2025-05-14 10:03:58 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate/login - application/json 61
[2025-05-14 10:03:58 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:33:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:03:58 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:33:58'.
[2025-05-14 10:03:58 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/authenticate/login - 404 0 null 32.138ms
[2025-05-14 10:03:58 INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:3000/api/authentication/authenticate/login, Response status code: 404
[2025-05-14 10:06:08 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/login - application/json 61
[2025-05-14 10:06:08 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:36:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:06:08 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:36:08'.
[2025-05-14 10:06:08 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 10:06:08 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(MovieManagementAPI.Models.UserDTO) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 10:06:14 INF] Executed DbCommand (31ms) [Parameters=[@__username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."PasswordHash", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
[2025-05-14 10:06:15 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI) in 7598.9235ms
[2025-05-14 10:06:15 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 10:06:15 ERR] Unhandled exception occurred while processing request
BCrypt.Net.SaltParseException: Invalid salt version
   at BCrypt.Net.BCrypt.HashPassword(String inputKey, String salt, Boolean enhancedEntropy, HashType hashType)
   at BCrypt.Net.BCrypt.Verify(String text, String hash, Boolean enhancedEntropy, HashType hashType)
   at MovieManagementAPI.Controllers.AuthenticationController.Login(UserDTO userDTO) in C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI\Controllers\AuthenticationController.cs:line 65
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at MovieManagementAPI.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI\Middlewares\ExceptionHandlingMiddleware.cs:line 17
[2025-05-14 10:06:15 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/login - 500 null null 7931.9934ms
[2025-05-14 10:06:33 INF] Application is shutting down...
[2025-05-14 10:08:04 INF] Starting MovieAPI web application...
[2025-05-14 10:08:04 INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-05-14 10:08:04 INF] Now listening on: https://localhost:3000
[2025-05-14 10:08:04 INF] Now listening on: http://localhost:3001
[2025-05-14 10:08:04 INF] Application started. Press Ctrl+C to shut down.
[2025-05-14 10:08:04 INF] Hosting environment: Development
[2025-05-14 10:08:04 INF] Content root path: C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI
[2025-05-14 10:08:12 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/login - application/json 55
[2025-05-14 10:08:12 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:08:12 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:12'.
[2025-05-14 10:08:13 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 10:08:13 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(MovieManagementAPI.Models.UserDTO) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 10:08:15 INF] Executed DbCommand (38ms) [Parameters=[@__username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."PasswordHash", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
[2025-05-14 10:08:16 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI) in 3362.911ms
[2025-05-14 10:08:16 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 10:08:16 ERR] Unhandled exception occurred while processing request
BCrypt.Net.SaltParseException: Invalid salt version
   at BCrypt.Net.BCrypt.HashPassword(String inputKey, String salt, Boolean enhancedEntropy, HashType hashType)
   at BCrypt.Net.BCrypt.Verify(String text, String hash, Boolean enhancedEntropy, HashType hashType)
   at MovieManagementAPI.Controllers.AuthenticationController.Login(UserDTO userDTO) in C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI\Controllers\AuthenticationController.cs:line 65
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at MovieManagementAPI.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI\Middlewares\ExceptionHandlingMiddleware.cs:line 17
[2025-05-14 10:08:16 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/login - 500 null null 3974.8372ms
[2025-05-14 10:08:29 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/register - application/json 55
[2025-05-14 10:08:29 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:08:29 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:29'.
[2025-05-14 10:08:29 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Register (MovieManagementAPI)'
[2025-05-14 10:08:29 INF] Route matched with {action = "Register", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Register(MovieManagementAPI.Models.UserDTO) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 10:08:29 INF] Executed DbCommand (0ms) [Parameters=[@__username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."PasswordHash", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
[2025-05-14 10:08:29 INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
[2025-05-14 10:08:29 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Register (MovieManagementAPI) in 59.9793ms
[2025-05-14 10:08:29 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Register (MovieManagementAPI)'
[2025-05-14 10:08:29 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/register - 400 null text/plain; charset=utf-8 100.5091ms
[2025-05-14 10:08:46 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/register - application/json 63
[2025-05-14 10:08:46 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:08:46 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:46'.
[2025-05-14 10:08:46 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Register (MovieManagementAPI)'
[2025-05-14 10:08:46 INF] Route matched with {action = "Register", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Register(MovieManagementAPI.Models.UserDTO) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 10:08:46 INF] Executed DbCommand (0ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."PasswordHash", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
[2025-05-14 10:08:47 INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 60), @p1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "Username")
VALUES (@p0, @p1)
RETURNING "Id";
[2025-05-14 10:08:47 INF] Executing OkObjectResult, writing value of type 'System.String'.
[2025-05-14 10:08:47 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Register (MovieManagementAPI) in 910.0609ms
[2025-05-14 10:08:47 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Register (MovieManagementAPI)'
[2025-05-14 10:08:47 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/register - 200 null text/plain; charset=utf-8 986.5926ms
[2025-05-14 10:08:55 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/login - application/json 63
[2025-05-14 10:08:55 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:08:55 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 04:38:55'.
[2025-05-14 10:08:55 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 10:08:55 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(MovieManagementAPI.Models.UserDTO) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 10:08:55 INF] Executed DbCommand (0ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."PasswordHash", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
[2025-05-14 10:08:56 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-05-14 10:08:56 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI) in 617.0523ms
[2025-05-14 10:08:56 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 10:08:56 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/login - 200 253 application/json; charset=utf-8 676.9585ms
[2025-05-14 10:09:10 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies - application/json 114
[2025-05-14 10:09:10 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:09:10 INF] Bearer was not authenticated. Failure message: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
[2025-05-14 10:09:10 INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-05-14 10:09:10 INF] AuthenticationScheme: Bearer was challenged.
[2025-05-14 10:09:10 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies - 401 0 null 42.2255ms
[2025-05-14 10:09:18 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies - application/json 114
[2025-05-14 10:09:18 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:09:18 INF] Bearer was not authenticated. Failure message: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
[2025-05-14 10:09:18 INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-05-14 10:09:18 INF] AuthenticationScheme: Bearer was challenged.
[2025-05-14 10:09:18 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies - 401 0 null 20.0431ms
[2025-05-14 10:09:27 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies/1 - application/json 114
[2025-05-14 10:09:27 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:09:27 INF] Bearer was not authenticated. Failure message: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
[2025-05-14 10:09:27 INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-05-14 10:09:27 INF] AuthenticationScheme: Bearer was challenged.
[2025-05-14 10:09:27 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies/1 - 401 0 null 25.001ms
[2025-05-14 10:12:23 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies/1 - application/json 114
[2025-05-14 10:12:23 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:12:23 INF] Bearer was not authenticated. Failure message: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
[2025-05-14 10:12:23 INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-05-14 10:12:23 INF] AuthenticationScheme: Bearer was challenged.
[2025-05-14 10:12:23 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies/1 - 401 0 null 24.0033ms
[2025-05-14 10:12:35 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies/1 - application/json 114
[2025-05-14 10:12:35 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 10:12:35 INF] Bearer was not authenticated. Failure message: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
[2025-05-14 10:12:35 INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-05-14 10:12:35 INF] AuthenticationScheme: Bearer was challenged.
[2025-05-14 10:12:35 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies/1 - 401 0 null 11.2036ms
[2025-05-14 11:11:38 INF] Starting MovieAPI web application...
[2025-05-14 11:11:38 INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-05-14 11:11:39 INF] Now listening on: https://localhost:3000
[2025-05-14 11:11:39 INF] Now listening on: http://localhost:3001
[2025-05-14 11:11:39 INF] Application started. Press Ctrl+C to shut down.
[2025-05-14 11:11:39 INF] Hosting environment: Development
[2025-05-14 11:11:39 INF] Content root path: C:\Users\admin\Desktop\c#\asp.netCoreWebAPI\MovieManagementAPI\MovieManagementAPI
[2025-05-14 11:12:10 INF] Request starting HTTP/1.1 POST https://localhost:3000/api/authentication/login - application/json 63
[2025-05-14 11:12:10 INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 05:42:10'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-05-14 11:12:10 INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '06-05-2025 04:43:10', Current time (UTC): '14-05-2025 05:42:10'.
[2025-05-14 11:12:10 INF] Executing endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 11:12:10 INF] Route matched with {action = "Login", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Login(MovieManagementAPI.Models.UserDTO) on controller MovieManagementAPI.Controllers.AuthenticationController (MovieManagementAPI).
[2025-05-14 11:12:13 INF] Executed DbCommand (29ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."PasswordHash", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
[2025-05-14 11:12:14 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-05-14 11:12:14 INF] Executed action MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI) in 3904.3173ms
[2025-05-14 11:12:14 INF] Executed endpoint 'MovieManagementAPI.Controllers.AuthenticationController.Login (MovieManagementAPI)'
[2025-05-14 11:12:14 INF] Request finished HTTP/1.1 POST https://localhost:3000/api/authentication/login - 200 289 application/json; charset=utf-8 4356.0788ms
[2025-05-14 11:12:25 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies/1 - application/json 114
[2025-05-14 11:12:25 INF] Executing endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMoviesById (MovieManagementAPI)'
[2025-05-14 11:12:25 INF] Route matched with {action = "GetMoviesById", controller = "Movies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MovieManagementAPI.Models.MovieDTO]] GetMoviesById(Int32) on controller MovieManagementAPI.Controllers.MoviesController (MovieManagementAPI).
[2025-05-14 11:12:25 INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."DirectorId", "s"."Title", "s"."Id0", "s"."BirthDate", "s"."Name", "s"."Id1", "s"."Genre", "s"."MovieId", "s"."ReleaseDate", "s0"."MovieId", "s0"."CastId", "s0"."Id", "s0"."Name"
FROM (
    SELECT "m"."Id", "m"."DirectorId", "m"."Title", "d"."Id" AS "Id0", "d"."BirthDate", "d"."Name", "m0"."Id" AS "Id1", "m0"."Genre", "m0"."MovieId", "m0"."ReleaseDate"
    FROM "Movies" AS "m"
    INNER JOIN "Directors" AS "d" ON "m"."DirectorId" = "d"."Id"
    LEFT JOIN "MovieDetails" AS "m0" ON "m"."Id" = "m0"."MovieId"
    WHERE "m"."Id" = @__movieId_0
    LIMIT 1
) AS "s"
LEFT JOIN (
    SELECT "m1"."MovieId", "m1"."CastId", "c"."Id", "c"."Name"
    FROM "MovieCasts" AS "m1"
    INNER JOIN "Casts" AS "c" ON "m1"."CastId" = "c"."Id"
) AS "s0" ON "s"."Id" = "s0"."MovieId"
ORDER BY "s"."Id", "s"."Id0", "s"."Id1", "s0"."MovieId", "s0"."CastId"
[2025-05-14 11:12:25 INF] Executing OkObjectResult, writing value of type 'MovieManagementAPI.Models.MovieDTO'.
[2025-05-14 11:12:25 INF] Executed action MovieManagementAPI.Controllers.MoviesController.GetMoviesById (MovieManagementAPI) in 469.757ms
[2025-05-14 11:12:25 INF] Executed endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMoviesById (MovieManagementAPI)'
[2025-05-14 11:12:25 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies/1 - 200 189 application/json; charset=utf-8 536.1444ms
[2025-05-14 11:12:31 INF] Request starting HTTP/1.1 GET https://localhost:3000/api/movies - application/json 114
[2025-05-14 11:12:31 INF] Executing endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI)'
[2025-05-14 11:12:31 INF] Route matched with {action = "GetMovies", controller = "Movies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MovieManagementAPI.Models.MovieDTO]]] GetMovies() on controller MovieManagementAPI.Controllers.MoviesController (MovieManagementAPI).
[2025-05-14 11:12:31 INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "m"."Id", "m"."DirectorId", "m"."Title", "d"."Id", "d"."BirthDate", "d"."Name", "m0"."Id", "m0"."Genre", "m0"."MovieId", "m0"."ReleaseDate", "s"."MovieId", "s"."CastId", "s"."Id", "s"."Name"
FROM "Movies" AS "m"
INNER JOIN "Directors" AS "d" ON "m"."DirectorId" = "d"."Id"
LEFT JOIN "MovieDetails" AS "m0" ON "m"."Id" = "m0"."MovieId"
LEFT JOIN (
    SELECT "m1"."MovieId", "m1"."CastId", "c"."Id", "c"."Name"
    FROM "MovieCasts" AS "m1"
    INNER JOIN "Casts" AS "c" ON "m1"."CastId" = "c"."Id"
) AS "s" ON "m"."Id" = "s"."MovieId"
ORDER BY "m"."Id", "d"."Id", "m0"."Id", "s"."MovieId", "s"."CastId"
[2025-05-14 11:12:31 INF] Showing Movie details entity
[2025-05-14 11:12:31 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieManagementAPI.Models.MovieDTO, MovieManagementAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-05-14 11:12:31 INF] Executed action MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI) in 127.7247ms
[2025-05-14 11:12:31 INF] Executed endpoint 'MovieManagementAPI.Controllers.MoviesController.GetMovies (MovieManagementAPI)'
[2025-05-14 11:12:31 INF] Request finished HTTP/1.1 GET https://localhost:3000/api/movies - 200 923 application/json; charset=utf-8 152.5029ms
